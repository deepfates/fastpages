---
keywords: fastai
description: Generating blog pages for my GAN experiments
title: Language Arts template
categories: [synthetic-media]
hide: true
nb_path: _notebooks/2021-09-02-language-arts-template.ipynb
layout: notebook
---

<!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2021-09-02-language-arts-template.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Around the end of 2020 I learned to train Generative Adversarial Networks, or GANs, on image datasets to create art generators. I used a bunch of book and font data and made a series i call <strong>Language Arts</strong>.</p>
<p>To display those in the <code>fastpages</code> framework I need to make markdown files for each of the projects, with its own date and description, and a list of image tags to display. Also a header image and video tags for any interpolation videos. And of course I'll need to copy some images over from the folder itself.</p>
<p>Creating a template string has worked so far, for generating markdown folders. I can't do it entirely programmatically because I want to insert relevant comments for each one as I recall them. And I want to hand select the images, so I don't just copy over a bunch of crappy early-epoch training images. Probably the best way to do this is to hcopy images for each GAN project to subfolder of <code>images</code> with its name, then use a function of the folder name and manually-added metadata to build a markdown file over the contents of the folder. There are only so many projects I've built, and the marginal cost for adding a new one will be small if I can re-use the function.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Markdown</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="n">in_dir</span> <span class="o">=</span> <span class="s1">&#39;../images/book_cover_gan&#39;</span>

<span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="n">file</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="n">in_dir</span><span class="p">)</span><span class="o">.</span><span class="n">iterdir</span><span class="p">()]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following will display all the images when printed into the notebook, but doesn't get picked up by the fastpages converter, so it looks bad on the website. Maybe some day I will fix the converter myself, but until then I'm okay with generating markdown files that will work</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">images</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[PosixPath(&#39;../images/book_cover_gan/95-ema.jpg&#39;),
 PosixPath(&#39;../images/book_cover_gan/74-ema.jpg&#39;),
 PosixPath(&#39;../images/book_cover_gan/117-ema.jpg&#39;),
 PosixPath(&#39;../images/book_cover_gan/99-ema.jpg&#39;),
 PosixPath(&#39;../images/book_cover_gan/48-ema.jpg&#39;)]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;95-ema.jpg&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">title</span> <span class="o">=</span> <span class="n">in_dir</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;gan&#39;</span><span class="p">,</span><span class="s1">&#39;GAN&#39;</span><span class="p">)</span>

           
<span class="n">images_md</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;![generated image](</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">parent</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">image</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">)&#39;</span> <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">])</span>

<span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;An early experiment with the [lightweight-gan](https://github.com/lucidrains/lightweight-gan) architecture trained on a 55K-image book dataset.&quot;</span>

<span class="n">images_html</span> <span class="o">=</span> <span class="s1">&#39;&lt;/n&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">parent</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">image</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot; alt=&quot;generated image&quot;&gt;&#39;</span> <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">])</span>


<span class="n">template_md</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;---</span>
<span class="s1">title: </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s1"></span>
<span class="s1">layout: post</span>
<span class="s1">toc: false</span>
<span class="s1">badges: false</span>
<span class="s1">image: </span><span class="si">{</span><span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"></span>
<span class="s1">categories: [synthetic-media]</span>
<span class="s1">---</span>

<span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s1"></span>

<span class="s1">&lt;div style=&quot; display: flex; flex-flow: wrap&quot;&gt;</span>
<span class="si">{</span><span class="n">images_html</span><span class="si">}</span><span class="s1"></span>
<span class="s1">&lt;/div&gt;</span>
<span class="s1">            &#39;&#39;&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">date</span> <span class="o">=</span> <span class="s1">&#39;2020-11-28&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;../_posts/language-arts/</span><span class="si">{</span><span class="n">date</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="n">title</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">.md&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">template_md</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">f</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Wrap it all in a function with minimum necessary inputs, and we can print a few in quick succession! ALthought it will be good to separate the pure markdown function from teh effect of writing to disk.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_md</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">images</span><span class="p">,</span> <span class="n">video</span><span class="p">):</span>
    
    <span class="n">images_html</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;&lt;img src=&quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">parent</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">image</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot; alt=&quot;generated image&quot;&gt;&#39;</span> <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">])</span>

    <span class="n">video_html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">{{</span><span class="s1">% include video_small.html url=&quot;</span><span class="si">{</span><span class="n">video</span><span class="si">}</span><span class="s1">&quot; %</span><span class="se">}}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">video</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        
    
    <span class="n">template_md</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;---</span>
<span class="s1">title: </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s1"></span>
<span class="s1">layout: post</span>
<span class="s1">toc: false</span>
<span class="s1">badges: false</span>
<span class="s1">image: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">2</span><span class="p">:]</span><span class="si">}</span><span class="s1"></span>
<span class="s1">categories: [synthetic-media]</span>
<span class="s1">---</span>

<span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s1"></span>

<span class="si">{</span><span class="n">video_html</span><span class="si">}</span><span class="s1"></span>

<span class="s1">## Samples</span>
<span class="s1">&lt;div style=&quot;display: flex; flex-flow: wrap; gap: 2rem&quot;&gt;</span>
<span class="si">{</span><span class="n">images_html</span><span class="si">}</span><span class="s1"></span>
<span class="s1">&lt;/div&gt;</span>
<span class="s1">            &#39;&#39;&#39;</span>
    
    <span class="k">return</span><span class="p">(</span><span class="n">template_md</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_md</span><span class="p">(</span><span class="s1">&#39;../images/book_cover_gan&#39;</span><span class="p">,</span>
       <span class="s1">&#39;2020-11-28&#39;</span><span class="p">,</span>
      <span class="s2">&quot;An early experiment with the [lightweight-gan](https://github.com/lucidrains/lightweight-gan) architecture trained on a 55K-image book dataset.&quot;</span><span class="p">,</span>
      <span class="n">images</span><span class="p">,</span>
      <span class="s2">&quot;/images/book-gan.mp4&quot;</span><span class="p">)[:</span><span class="mi">500</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;---\ntitle: ../images/book_cover_gan\nlayout: post\ntoc: false\nbadges: false\nimage: /images/book_cover_gan/95-ema.jpg\ncategories: [synthetic-media]\n---\n\nAn early experiment with the [lightweight-gan](https://github.com/lucidrains/lightweight-gan) architecture trained on a 55K-image book dataset.\n\n{% include video_small.html url=&#34;/images/book-gan.mp4&#34; %}\n\n&lt;div style=&#34;display: flex; flex-flow: wrap; gap: 2rem&#34;&gt;\n&lt;img src=&#34;/images/book_cover_gan/95-ema.jpg&#34; alt=&#34;generated image&#34;&gt; &lt;img src=&#34;/images/book&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">write_md</span><span class="p">(</span><span class="n">in_dir</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">video</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="n">file</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="n">in_dir</span><span class="p">)</span><span class="o">.</span><span class="n">iterdir</span><span class="p">()]</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">in_dir</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;gan&#39;</span><span class="p">,</span><span class="s1">&#39;GAN&#39;</span><span class="p">)</span>
    
    <span class="n">post_md</span> <span class="o">=</span> <span class="n">get_md</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">images</span><span class="p">,</span> <span class="n">video</span><span class="p">)</span>
<span class="c1">#     print(post_md)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;../_posts/language-arts/</span><span class="si">{</span><span class="n">date</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="n">title</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">.md&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">post_md</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">f</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">write_md</span><span class="p">(</span><span class="s1">&#39;../images/book_cover_gan&#39;</span><span class="p">,</span>
       <span class="s1">&#39;2020-11-28&#39;</span><span class="p">,</span>
      <span class="s2">&quot;An early experiment with the [lightweight-gan](https://github.com/lucidrains/lightweight-gan) architecture trained on a 55K-image book dataset.&quot;</span><span class="p">,</span>
      <span class="s2">&quot;/images/book-gan.mp4&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">write_md</span><span class="p">(</span><span class="s1">&#39;../images/symbol_gan_unscii&#39;</span><span class="p">,</span>
       <span class="s1">&#39;2021-02-03&#39;</span><span class="p">,</span>
      <span class="sd">&quot;&quot;&quot;My first experiment with trying to generate new language glyphs. I used the [unscii](http://viznut.fi/unscii/) font because it has glyphs for most of the Unicode characters.</span>
<span class="sd">      </span>
<span class="sd">Unfortunately, since it&#39;s a bitmap font suitable for ASCII terminals, the end result is very pixelated is hard to imagine as letters. It also tended toward</span>
<span class="sd">mode collapse, as the generator figured out it could fool the discriminator with a very faint grid of dots in a gridlike pattern.&quot;&quot;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;/images/unscii-gan.mp4&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">write_md</span><span class="p">(</span><span class="s1">&#39;../images/symbol_gan_noto&#39;</span><span class="p">,</span>
       <span class="s1">&#39;2021-02-05&#39;</span><span class="p">,</span>
      <span class="sd">&quot;&quot;&quot;A model finetuned from my unscii GAN. I tried with Noto font from Google, but the underlying model was too deranged. </span>
<span class="sd">Also, Noto has a lot more Eastern ideograms than Western characters and I don&#39;t know how to tell if those are even translating properly.&quot;&quot;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;/images/noto-gan.mp4&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">write_md</span><span class="p">(</span><span class="s1">&#39;../images/symbol_gan_code2000&#39;</span><span class="p">,</span>
       <span class="s1">&#39;2021-02-09&#39;</span><span class="p">,</span>
      <span class="sd">&quot;&quot;&quot;I recreated my Unicode glyphs dataset with the abandonware font [Code2000](https://web.archive.org/web/20110108105420/http://code2000.net/), which has great coverage for Western characters as well as a funky, humanist design.</span>

<span class="sd">This time I started to see real characters emerge among the imagined ones. It was at this point that I began to wonder if this was a good thing to do to my brain.</span>

<span class="sd">But it was too late...&quot;&quot;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">write_md</span><span class="p">(</span><span class="s1">&#39;../images/symbol_gan_4word&#39;</span><span class="p">,</span>
       <span class="s1">&#39;2021-03-08&#39;</span><span class="p">,</span>
      <span class="sd">&quot;&quot;&quot;After many false starts and dead ends, I finally found a concept that would truly drive me insane. I finetuned my Code2000 symbol GAN model on a set of generated images.</span>

<span class="sd">These images consisted of the 1,000 most commonly used four-letter words in English. With the newly trained model, I generated some new ones.</span>

<span class="sd">If you would like to purchase one of these word worms, you can find them in NFT form at the [Language Arts Marketplace](https://opensea.io/collection/language-arts). I can&#39;t imagine why you would, but there it is.</span>

<span class="sd">**Warning: I don&#39;t know what happens if you stare at these for too long! Use at your own risk.**&quot;&quot;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

<script type="application/vnd.jupyter.widget-state+json">
{"state": {}, "version_major": 2, "version_minor": 0}
</script>

