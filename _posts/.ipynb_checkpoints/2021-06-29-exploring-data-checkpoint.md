---
keywords: fastai
title: Exploring the dataset
toc: true 
badges: true
comments: true
categories: [books, invisible-canon]
image: images/popularity-prestige.png
nb_path: _notebooks/2021-06-29-exploring-data.ipynb
layout: notebook
---

<!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2021-06-29-exploring-data.ipynb
-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">graph_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;records/to_graph.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/home/mage/.local/lib/python3.7/site-packages/numpy/lib/arraysetops.py:583: FutureWarning: elementwise comparison failed; returning scalar instead, but in the future will perform elementwise comparison
  mask |= (ar1 == a)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">graph_df</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>author_name</th>
      <th>top_genre</th>
      <th>publisher</th>
      <th>publication_year</th>
      <th>format</th>
      <th>num_pages</th>
      <th>average_rating</th>
      <th>ratings_count</th>
      <th>text_reviews_count</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>340599</th>
      <td>The Amazing Jessica (Sweet Valley Kids, #60)</td>
      <td>Francine Pascal</td>
      <td>children</td>
      <td>Bantam</td>
      <td>1995.0</td>
      <td>Paperback</td>
      <td>96.0</td>
      <td>3.68</td>
      <td>61.0</td>
      <td>2.0</td>
      <td>Under The Big Top!\nThe circus has come to Swe...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">graph_df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>1216072</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">subset</span> <span class="o">=</span> <span class="n">graph_df</span><span class="p">[</span><span class="n">graph_df</span><span class="p">[</span><span class="s1">&#39;ratings_count&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">600</span><span class="p">]</span>
<span class="nb">len</span><span class="p">(</span><span class="n">subset</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>93626</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">genres</span> <span class="o">=</span> <span class="n">subset</span><span class="p">[</span><span class="s1">&#39;top_genre&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span>
<span class="n">genres</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;fiction&#39;, &#39;fantasy&#39;, &#39;mystery&#39;, &#39;young-adult&#39;, &#39;romance&#39;,
       &#39;historical-fiction&#39;, &#39;favorites&#39;, &#39;science-fiction&#39;, &#39;manga&#39;,
       &#39;history&#39;,
       ...
       &#39;commentaries&#39;, &#39;simplicity&#39;, &#39;ja-jance&#39;, &#39;teen&#39;, &#39;soul-seekers&#39;,
       &#39;ever-after-high&#39;, &#39;american-civil-war&#39;, &#39;angela-knight&#39;, &#39;israel&#39;,
       &#39;african-history&#39;],
      dtype=&#39;object&#39;, length=982)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># import plotly.express as px</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#                 title=&quot;One Million Books&quot;, height=800, render_mode=&quot;webgl&quot;)</span>

<span class="c1"># HTML(fig.to_html())</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">plotly.graph_objects</span> <span class="k">as</span> <span class="nn">go</span>

<span class="kn">import</span> <span class="nn">plotly.express.colors</span> <span class="k">as</span> <span class="nn">colors</span>

<span class="n">palette</span> <span class="o">=</span> <span class="n">colors</span><span class="o">.</span><span class="n">cyclical</span><span class="o">.</span><span class="n">Twilight</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">palette</span> <span class="o">=</span> <span class="p">[</span><span class="n">palette</span><span class="p">[</span><span class="n">floor</span><span class="p">(</span><span class="mi">10</span><span class="o">/</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">graph_df</span><span class="p">[</span><span class="s1">&#39;top_genre&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>

<span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
    <span class="n">go</span><span class="o">.</span><span class="n">Scattergl</span><span class="p">(</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">graph_df</span><span class="p">[</span><span class="s1">&#39;publication_year&#39;</span><span class="p">],</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">graph_df</span><span class="p">[</span><span class="s1">&#39;average_rating&#39;</span><span class="p">],</span>
        <span class="n">hovertext</span> <span class="o">=</span> <span class="n">graph_df</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">graph_df</span><span class="p">[</span><span class="s1">&#39;author_name&#39;</span><span class="p">],</span>
        <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;markers&#39;</span><span class="p">,</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">line</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">palette</span><span class="p">,</span>
                <span class="n">width</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">update_traces</span><span class="p">()</span>

<span class="n">HTML</span><span class="p">(</span><span class="n">fig</span><span class="o">.</span><span class="n">to_html</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="o">.</span><span class="n">write_html</span><span class="p">(</span><span class="s2">&quot;records/ucsd-goodreads-genre-ratingcount-avgrating.html&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">hvplot</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh</span> <span class="kn">import</span> <span class="n">palettes</span>
<span class="kn">from</span> <span class="nn">bokeh.transform</span> <span class="kn">import</span> <span class="n">factor_cmap</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># source = ColumnDataSource(data=graph_df)</span>

<span class="c1"># tooltips = [(col, &quot;@{&quot; + col+&#39;}&#39;) for col in graph_df.keys()]</span>
<span class="c1"># hover = HoverTool( tooltips=tooltips)</span>
<span class="c1"># tooltips</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hvplot</span><span class="o">.</span><span class="n">help</span><span class="p">(</span><span class="s1">&#39;scatter&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
Scatter plot

Parameters
----------
x, y : string, optional
    Field name to draw x- and y-positions from
c: string, optional
    Name of the field to color points by
s: string, optional
    Name of the field to scale point size by
scale: number, optional
    Scaling factor to apply to point scaling
**kwds : optional
    Keyword arguments to pass on to
    :py:meth:`hvplot.converter.HoloViewsConverter`.
Returns
-------
obj : HoloViews object
    The HoloViews representation of the plot.


Generic options
---------------
clim: tuple
    Lower and upper bound of the color scale
cnorm (default=&#39;linear&#39;): str
    Color scaling which must be one of &#39;linear&#39;, &#39;log&#39; or &#39;eq_hist&#39;
colorbar (default=False): boolean
    Enables a colorbar
fontscale: number
    Scales the size of all fonts by the same amount, e.g. fontscale=1.5
    enlarges all fonts (title, xticks, labels etc.) by 50%
fontsize: number or dict
    Set title, label and legend text to the same fontsize. Finer control
    by using a dict: {&#39;title&#39;: &#39;15pt&#39;, &#39;ylabel&#39;: &#39;5px&#39;, &#39;ticks&#39;: 20}
flip_xaxis/flip_yaxis: boolean
    Whether to flip the axis left to right or up and down respectively
grid (default=False): boolean
    Whether to show a grid
hover : boolean
    Whether to show hover tooltips, default is True unless datashade is
    True in which case hover is False by default
hover_cols (default=[]): list or str
    Additional columns to add to the hover tool or &#39;all&#39; which will
    includes all columns (including indexes if use_index is True).
invert (default=False): boolean
    Swaps x- and y-axis
frame_width/frame_height: int
    The width and height of the data area of the plot
legend (default=True): boolean or str
    Whether to show a legend, or a legend position
    (&#39;top&#39;, &#39;bottom&#39;, &#39;left&#39;, &#39;right&#39;)
logx/logy (default=False): boolean
    Enables logarithmic x- and y-axis respectively
logz (default=False): boolean
    Enables logarithmic colormapping
loglog (default=False): boolean
    Enables logarithmic x- and y-axis
max_width/max_height: int
    The maximum width and height of the plot for responsive modes
min_width/min_height: int
    The minimum width and height of the plot for responsive modes
padding: number or tuple
    Fraction by which to increase auto-ranged extents to make
    datapoints more visible around borders. Supports tuples to
    specify different amount of padding for x- and y-axis and
    tuples of tuples to specify different amounts of padding for
    upper and lower bounds.
responsive: boolean
    Whether the plot should responsively resize depending on the
    size of the browser. Responsive mode will only work if at
    least one dimension of the plot is left undefined, e.g. when
    width and height or width and aspect are set the plot is set
    to a fixed size, ignoring any responsive option.
rot: number
    Rotates the axis ticks along the x-axis by the specified
    number of degrees.
shared_axes (default=True): boolean
    Whether to link axes between plots
transforms (default={}): dict
    A dictionary of HoloViews dim transforms to apply before plotting
title (default=&#39;&#39;): str
    Title for the plot
tools (default=[]): list
    List of tool instances or strings (e.g. [&#39;tap&#39;, box_select&#39;])
xaxis/yaxis: str or None
    Whether to show the x/y-axis and whether to place it at the
    &#39;top&#39;/&#39;bottom&#39; and &#39;left&#39;/&#39;right&#39; respectively.
xformatter/yformatter (default=None): str or TickFormatter
    Formatter for the x-axis and y-axis (accepts printf formatter,
    e.g. &#39;%.3f&#39;, and bokeh TickFormatter)
xlabel/ylabel/clabel (default=None): str
    Axis labels for the x-axis, y-axis, and colorbar
xlim/ylim (default=None): tuple or list
    Plot limits of the x- and y-axis
xticks/yticks (default=None): int or list
    Ticks along x- and y-axis specified as an integer, list of
    ticks positions, or list of tuples of the tick positions and labels
width (default=700)/height (default=300): int
    The width and height of the plot in pixels
attr_labels (default=None): bool
    Whether to use an xarray object&#39;s attributes as labels, defaults to
    None to allow best effort without throwing a warning. Set to True
    to see warning if the attrs can&#39;t be found, set to False to disable
    the behavior.
sort_date (default=True): bool
    Whether to sort the x-axis by date before plotting
symmetric (default=None): bool
    Whether the data are symmetric around zero. If left unset, the data
    will be checked for symmetry as long as the size is less than
    ``check_symmetric_max``.
check_symmetric_max (default=1000000):
    Size above which to stop checking for symmetry by default on the data.

Datashader options
------------------
aggregator (default=None):
    Aggregator to use when applying rasterize or datashade operation
    (valid options include &#39;mean&#39;, &#39;count&#39;, &#39;min&#39;, &#39;max&#39; and more, and
    datashader reduction objects)
dynamic (default=True):
    Whether to return a dynamic plot which sends updates on widget and
    zoom/pan events or whether all the data should be embedded
    (warning: for large groupby operations embedded data can become
    very large if dynamic=False)
datashade (default=False):
    Whether to apply rasterization and shading using datashader
    library returning an RGB object
dynspread (default=False):
    Allows plots generated with datashade=True to increase the point
    size to make sparse regions more visible
rasterize (default=False):
    Whether to apply rasterization using the datashader library
    returning an aggregated Image
x_sampling/y_sampling (default=None):
    Specifies the smallest allowed sampling interval along the x/y axis.

Geographic options
------------------
coastline (default=False):
    Whether to display a coastline on top of the plot, setting
    coastline=&#39;10m&#39;/&#39;50m&#39;/&#39;110m&#39; specifies a specific scale.
crs (default=None):
    Coordinate reference system of the data specified as Cartopy
    CRS object, proj.4 string or EPSG code.
features (default=None): dict or list
    A list of features or a dictionary of features and the scale
    at which to render it. Available features include &#39;borders&#39;,
    &#39;coastline&#39;, &#39;lakes&#39;, &#39;land&#39;, &#39;ocean&#39;, &#39;rivers&#39; and &#39;states&#39;.
    Available scales include &#39;10m&#39;/&#39;50m&#39;/&#39;110m&#39;.
geo (default=False):
    Whether the plot should be treated as geographic (and assume
    PlateCarree, i.e. lat/lon coordinates).
global_extent (default=False):
    Whether to expand the plot extent to span the whole globe.
project (default=False):
    Whether to project the data before plotting (adds initial
    overhead but avoids projecting data when plot is dynamically
    updated).
tiles (default=False):
    Whether to overlay the plot on a tile source. Tiles sources
    can be selected by name or a tiles object or class can be passed,
    the default is &#39;Wikipedia&#39;.

Style options
-------------

alpha
angle
cmap
color
fill_alpha
fill_color
hover_alpha
hover_color
hover_fill_alpha
hover_fill_color
hover_line_alpha
hover_line_color
line_alpha
line_cap
line_color
line_dash
line_join
line_width
marker
muted_alpha
muted_color
muted_fill_alpha
muted_fill_color
muted_line_alpha
muted_line_color
nonselection_alpha
nonselection_color
nonselection_fill_alpha
nonselection_fill_color
nonselection_line_alpha
nonselection_line_color
palette
selection_alpha
selection_color
selection_fill_alpha
selection_fill_color
selection_line_alpha
selection_line_color
size
visible
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">graf</span> <span class="o">=</span> <span class="n">subset</span><span class="o">.</span><span class="n">hvplot</span><span class="p">(</span>
    <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;scatter&#39;</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;publication_year&#39;</span><span class="p">,</span> 
    <span class="n">logx</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
    <span class="n">y</span><span class="o">=</span><span class="s1">&#39;average_rating&#39;</span><span class="p">,</span>
    <span class="n">c</span><span class="o">=</span><span class="s1">&#39;top_genre&#39;</span><span class="p">,</span>
<span class="c1">#     colormap=palettes.Magma256,</span>
<span class="c1">#     hover=True, </span>
    <span class="n">hover_cols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;author_name&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">],</span>
<span class="c1">#     datashade=True, </span>
<span class="c1">#     dynspread=True, </span>
    <span class="n">width</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> 
    <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.core.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">subset</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>93626</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sprite_size</span> <span class="o">=</span> <span class="mi">32</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">graph_df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">50000</span> <span class="k">else</span> <span class="mi">64</span>
<span class="n">jsonstr</span> <span class="o">=</span> <span class="n">subset</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">)</span>


<span class="c1"># Create Facets template  </span>
<span class="n">HTML_TEMPLATE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/1.3.3/webcomponents-lite.js&quot;&gt;&lt;/script&gt;</span>
<span class="s2">        &lt;link rel=&quot;import&quot; href=&quot;https://raw.githubusercontent.com/PAIR-code/facets/master/facets-dist/facets-jupyter.html&quot;&gt;</span>
<span class="s2">        &lt;facets-dive sprite-image-width=&quot;</span><span class="si">{sprite_size}</span><span class="s2">&quot; sprite-image-height=&quot;</span><span class="si">{sprite_size}</span><span class="s2">&quot; id=&quot;elem&quot; height=&quot;80vh&quot;&gt;&lt;/facets-dive&gt;</span>
<span class="s2">        &lt;script&gt;</span>
<span class="s2">          document.querySelector(&quot;#elem&quot;).data = </span><span class="si">{jsonstr}</span><span class="s2">;</span>
<span class="s2">        &lt;/script&gt;&quot;&quot;&quot;</span>

<span class="c1"># Load the json dataset and the sprite_size into the template</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">HTML_TEMPLATE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jsonstr</span><span class="o">=</span><span class="n">jsonstr</span><span class="p">,</span> <span class="n">sprite_size</span><span class="o">=</span><span class="n">sprite_size</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># display(HTML(html))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;records/facets-dive.html&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="What-signal-can-I-see-in-the-data?">What signal can I see in the data?<a class="anchor-link" href="#What-signal-can-I-see-in-the-data?"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="What-signals-can-the-computer-find-in-the-data?">What signals can the computer find in the data?<a class="anchor-link" href="#What-signals-can-the-computer-find-in-the-data?"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Which-books-are-the-most-desirable-in-each-category?">Which books are the most desirable in each category?<a class="anchor-link" href="#Which-books-are-the-most-desirable-in-each-category?"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Explain-and-predict">Explain and predict<a class="anchor-link" href="#Explain-and-predict"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-can-I-package-the-canon-to-be-explored-and-visualized?">How can I package the canon to be explored and visualized?<a class="anchor-link" href="#How-can-I-package-the-canon-to-be-explored-and-visualized?"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-can-I-extrapolate-from-the-canon-to-predict-unseen-data-points?">How can I extrapolate from the canon to predict unseen data points?<a class="anchor-link" href="#How-can-I-extrapolate-from-the-canon-to-predict-unseen-data-points?"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-do-I-update-the-canon-in-the-future,-to-reflect-changing-trends-and-new-data?">How do I update the canon in the future, to reflect changing trends and new data?<a class="anchor-link" href="#How-do-I-update-the-canon-in-the-future,-to-reflect-changing-trends-and-new-data?"> </a></h2>
</div>
</div>
</div>
</div>
 

